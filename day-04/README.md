# 第04天：C语言与画面显示练习
## 电脑启动过程
1. 按下开机键通电；
2. BIOS启动并自检，以legacy或者UEFI方式启动硬件修通；
3. BIOS读取硬盘/软盘/光驱的第一个扇区(512字节)到内存`0x7c00~0x7dff`处；
4. 执行`0x7c00-0x7dff`代码启动相应的操作系统。

其中这512字节的程序就叫做bootloader，学习过程中这里叫做IPL（initial program loader）。总之，开机之后会执行这512字节的指令，这512字节的指令再去将操作系统内核（OS kernel）加载到内存当中，然后启动真正的操作系统。

## BIOS
BIOS是基本输入输出系统，由于BIOS是16位汇编语言程序，所以只能运行在16位实模式，最大访问内存为2^16/(2^8*2^8)=1MB，特别是UEFI是32位或64位高级语言程序，突破实模式限制就可以达到要求的最大寻址。

## 从汇编语言到C语言
整个启动过程需要经过下面几个步骤
1. 通过Makefile将源代码生成软盘镜像文件；
2. 插入软盘，开机通电（以虚拟机或者qemu虚拟机中执行）；
3. BIOS自动加载首扇区的512字节并且调用其启动程序(ipl.S)；
4. 启动程序将软盘内容加载到内存并且跳转到指定地址执行(ipl.S)；
5. 从16位实模式转换到32位保护模式(hello.S)；
6. 执行C语言入口函数(bootpack.c)。

## Hello-OS 内存分布示意图
通过回顾上述操作，我们可以得到32位条件下，内存分布范围图

