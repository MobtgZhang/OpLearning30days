GAS LISTING src/asm/asm_func.s 			page 1


   1              	.arch i486
   2              	
   3              	.text
   4              	
   5              	.global io_hlt, io_cli, io_sti, io_stihlt
   6              	.global io_in8, io_in16, io_in32
   7              	.global io_out8, io_out16, io_out32
   8              	.global io_load_eflags, io_store_eflags
   9              	.global load_gdtr, load_idtr
  10              	
  11              	#void io_htl(void)
  12              	io_hlt:
  13 0000 F4       	    hlt
  14 0001 C3       	    ret
  15              	
  16              	#void io_cli(void)
  17              	io_cli:
  18 0002 FA       	    cli
  19 0003 C3       	    ret
  20              	
  21              	#void io_sti(void)
  22              	io_sti:
  23 0004 FB       	    sti
  24 0005 C3       	    ret
  25              	
  26              	#void io_stihlt(void)
  27              	io_stihlt:
  28 0006 FB       	    sti
  29 0007 F4       	    hlt
  30 0008 C3       	    ret
  31              	
  32              	#int io_in8(int port)
  33              	io_in8:
  34 0009 8B542404 	    movl 4(%esp), %edx
  35 000d B8000000 	    movl $0, %eax
  35      00
  36 0012 EC       	    inb %dx, %al
  37 0013 C3       	    ret
  38              	
  39              	#int io_in16(int port)
  40              	io_in16:
  41 0014 8B542404 	    movl 4(%esp), %edx
  42 0018 B8000000 	    movl $0, %eax
  42      00
  43 001d 66ED     	    inw %dx, %ax
  44 001f C3       	    ret
  45              	
  46              	#int io_in32(int port)
  47              	io_in32:
  48 0020 8B542404 	    movl 4(%esp), %edx
  49 0024 ED       	    inl %dx, %eax
  50 0025 C3       	    ret
  51              	
  52              	#void io_out8(int port, int data)
  53              	io_out8:
  54 0026 8B542404 	    movl 4(%esp), %edx
  55 002a 8A442408 	    movb 8(%esp), %al
GAS LISTING src/asm/asm_func.s 			page 2


  56 002e EE       	    outb %al, %dx
  57 002f C3       	    ret
  58              	
  59              	#void io_out16(int port, int data)
  60              	io_out16:
  61 0030 8B542404 	    movl 4(%esp), %edx
  62 0034 8B442408 	    movl 8(%esp), %eax
  63 0038 66EF     	    outw %ax, %dx
  64 003a C3       	    ret
  65              	
  66              	#void io_out32(int port, int data)
  67              	io_out32:
  68 003b 8B542404 	    movl 4(%esp), %edx
  69 003f 8B442408 	    movl 8(%esp), %eax
  70 0043 EF       	    outl %eax, %dx
  71 0044 C3       	    ret
  72              	
  73              	#int io_load_eflags(void)
  74              	io_load_eflags:
  75 0045 9C       	    pushf
  76 0046 58       	    pop %eax
  77 0047 C3       	    ret
  78              	
  79              	#int io_store_eflags(void)
  80              	io_store_eflags:
  81 0048 8B442404 	    movl 4(%esp), %eax
  82 004c 50       	    push %eax
  83 004d 9D       	    popf
  84 004e C3       	    ret
  85              	
  86              	#void load_gdtr(int limit, int addr)
  87              	load_gdtr:
  88 004f 668B4424 	    mov 4(%esp), %ax #limit
  88      04
  89 0054 66894424 	    mov %ax, 6(%esp)
  89      06
  90 0059 0F015424 	    lgdt 6(%esp)
  90      06
  91 005e C3       	    ret
  92              	
  93              	#void load_idtr(int limti, int addr)
  94              	load_idtr:
  95 005f 668B4424 	    mov 4(%esp), %ax #limit
  95      04
  96 0064 66894424 	    mov %ax, 6(%esp)
  96      06
  97 0069 0F015C24 	    lidt 6(%esp)
  97      06
  98 006e C3       	    ret
GAS LISTING src/asm/asm_func.s 			page 3


DEFINED SYMBOLS
  src/asm/asm_func.s:12     .text:0000000000000000 io_hlt
  src/asm/asm_func.s:17     .text:0000000000000002 io_cli
  src/asm/asm_func.s:22     .text:0000000000000004 io_sti
  src/asm/asm_func.s:27     .text:0000000000000006 io_stihlt
  src/asm/asm_func.s:33     .text:0000000000000009 io_in8
  src/asm/asm_func.s:40     .text:0000000000000014 io_in16
  src/asm/asm_func.s:47     .text:0000000000000020 io_in32
  src/asm/asm_func.s:53     .text:0000000000000026 io_out8
  src/asm/asm_func.s:60     .text:0000000000000030 io_out16
  src/asm/asm_func.s:67     .text:000000000000003b io_out32
  src/asm/asm_func.s:74     .text:0000000000000045 io_load_eflags
  src/asm/asm_func.s:80     .text:0000000000000048 io_store_eflags
  src/asm/asm_func.s:87     .text:000000000000004f load_gdtr
  src/asm/asm_func.s:94     .text:000000000000005f load_idtr

NO UNDEFINED SYMBOLS
